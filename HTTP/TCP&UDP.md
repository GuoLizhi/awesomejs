TCP和UDP是两个有代表性的传输层协议。

### 1. UDP

UDP：用户数据协议，是一种无连接的协议。当报文发送之后，是无法得知其是否安全完整到达的。（只管发，不管对方接收到了没有）

UDP的主要特点：

1. 首先 UDP 是不需要和 TCP一样在发送数据前进行三次握手建立连接的，想发数据就可以开始发送了。并且也只是数据报文的搬运工，不会对数据报文进行任何拆分和拼接操作。
2. 有单播，多播，广播的功能：不止支持一对一的传输方式，同样支持一对多，多对多，多对一的方式
3. UDP是面向报文的：UDP对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界。因此，应用程序必须选择合适大小的报文
4. 不可靠性：首先不可靠性体现在无连接上，通信都不需要建立连接，想发就发，这样的情况肯定不可靠。 UDP 因为没有拥塞控制，一直会以恒定的速度发送数据。即使网络条件不好，也不会对发送速率进行调整。这样实现的弊端就是在网络条件不好的情况下可能会导致丢包。
5. 头部开销小，传输数据报文很高效

### 2 TCP

TCP：是一种面向连接的、可靠的、基于字节流的传输层通信协议

> TCP是传输层协议，HTTP是应用层协议。从本质上来讲，二者没有可比性。但是HTTP是基于TCP协议的。比如当浏览器需要从获取网页数据时，会发出一次HTTP请求。HTTP会通过TCP建立起一个到服务器的连接通道，当本次请求需要的数据完毕之后，HTTP会立即将TCP连接断开。所以HTTP是一种无状态的短连接。

三次握手：

1. 客户端向服务端发送SYN的标识
2. 服务端接收到报文后，会返回一个SYN+ACK的应答
3. 客服端再次向服务端发送带有ACK标识的数据包，自此连接被建立起来

四次挥手：

1. 客户端首先发起FIN标记，用来关闭客户端到服务端的数据传输
2. 服务端接收到之后，会首先告诉应用层释放掉TCP连接。然后给客户端发送ACK包，确认序号为收到序号加1。
3. 在客户端发送请求完毕之后，服务端再次向客户端发送FIN包
4. 客户端接受到请求之后确认，向服务端发送ACK包，表示TCP连接结束。

TCP协议的特点：

1. 面向连接
2. 仅支持单播传输
3. 面向字节流
4. 可靠传输
5. 提供拥塞控制
6. TCP提供全双工通信

![compare](http://cdn.lznism.com/20201221_01.png)